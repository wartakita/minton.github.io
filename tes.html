<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Data Pertandingan BWF Badminton - Malaysia Masters 2025 (22 Mei 2025)</title>
  <style>
    /* Reset dan dasar */
    * {
      box-sizing: border-box;
    }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 1rem;
      background: #f9f9f9;
      color: #333;
    }
    h1 {
      text-align: center;
      margin-bottom: 1rem;
      color: #005a9c;
    }
    /* Container kartu pertandingan */
    #matches-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 1rem;
    }
    /* Kartu pertandingan */
    .match-card {
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      padding: 1rem;
      width: 100%;
      max-width: 350px;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      transition: transform 0.2s ease;
    }
    .match-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
    }
    /* Header kartu */
    .match-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-weight: 600;
      font-size: 1.1rem;
      color: #004080;
    }
    /* Tim dan pemain */
    .team {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .player {
      display: flex;
      align-items: center;
      gap: 0.3rem;
    }
    .player img {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      object-fit: cover;
      border: 1px solid #ccc;
    }
    .flag {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      object-fit: cover;
      border: 1px solid #ccc;
    }
    /* Skor */
    .score {
      font-weight: 700;
      font-size: 1.2rem;
      color: #007acc;
      margin-top: 0.5rem;
      display: flex;
      justify-content: center;
      gap: 1rem;
    }
    /* Info tambahan */
    .match-info {
      font-size: 0.9rem;
      color: #555;
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem 1rem;
      justify-content: center;
    }
    .info-item {
      background: #e6f0ff;
      padding: 0.3rem 0.6rem;
      border-radius: 12px;
      font-weight: 600;
      color: #004080;
    }
    /* Status LIVE */
    .live-badge {
      background: #d32f2f;
      color: white;
      padding: 0.2rem 0.6rem;
      border-radius: 12px;
      font-weight: 700;
      font-size: 0.85rem;
      animation: pulse 2s infinite;
    }
    @keyframes pulse {
      0%, 100% {opacity: 1;}
      50% {opacity: 0.6;}
    }
    /* Responsive */
    @media (min-width: 480px) {
      .match-card {
        width: 48%;
      }
    }
    @media (min-width: 768px) {
      .match-card {
        width: 30%;
      }
    }
  </style>
</head>
<body>
  <h1>Data Pertandingan BWF Badminton - Malaysia Masters 2025 (22 Mei 2025)</h1>
  <div id="matches-container">
    <p>Memuat data pertandingan...</p>
  </div>

  <script>
    const apiUrl = 'https://extranet-lv.bwfbadminton.com/api/tournaments/day-matches?tournamentCode=294DE888-25E7-4633-A28B-03825F250F61&date=2025-05-23';

    // Fungsi untuk membuat elemen pemain
    function createPlayerElement(player) {
      const playerDiv = document.createElement('div');
      playerDiv.className = 'player';

      const img = document.createElement('img');
      img.src = player.avatar?.thumbnailUrl || '';
      img.alt = player.nameDisplay || 'Player';
      img.title = player.nameDisplay || 'Player';

      const nameSpan = document.createElement('span');
      nameSpan.textContent = player.nameDisplay;

      playerDiv.appendChild(img);
      playerDiv.appendChild(nameSpan);

      return playerDiv;
    }

    // Fungsi membuat tim (bendera + pemain)
    function createTeamElement(team) {
      const teamDiv = document.createElement('div');
      teamDiv.className = 'team';

      const flagImg = document.createElement('img');
      flagImg.className = 'flag';
      flagImg.src = team.countryFlagUrl || '';
      flagImg.alt = team.countryCode || '';
      flagImg.title = team.countryCode || '';

      teamDiv.appendChild(flagImg);

      // Tambahkan pemain
      if (team.players && team.players.length > 0) {
        team.players.forEach(player => {
          const playerEl = createPlayerElement(player);
          teamDiv.appendChild(playerEl);
        });
      } else if (team.teamName) {
        // Jika tim berupa nama tim (tim beregu)
        const teamNameSpan = document.createElement('span');
        teamNameSpan.textContent = team.teamName;
        teamDiv.appendChild(teamNameSpan);
      }

      return teamDiv;
    }

    // Fungsi membuat skor per set
    function createScoreElement(scoreArray) {
      const scoreDiv = document.createElement('div');
      scoreDiv.className = 'score';

      scoreArray.forEach(set => {
        const setSpan = document.createElement('span');
        setSpan.textContent = `Set ${set.set}: ${set.home} - ${set.away}`;
        scoreDiv.appendChild(setSpan);
      });

      return scoreDiv;
    }

    // Fungsi membuat kartu pertandingan
    function createMatchCard(match) {
      const card = document.createElement('div');
      card.className = 'match-card';

      // Header: Event dan ronde
      const header = document.createElement('div');
      header.className = 'match-header';
      header.textContent = `${match.eventName || ''} - ${match.roundName || ''}`;
      card.appendChild(header);

      // Tim 1
      const team1El = createTeamElement(match.team1);
      card.appendChild(team1El);

      // Tim 2
      const team2El = createTeamElement(match.team2);
      card.appendChild(team2El);

      // Skor
      if (match.score && match.score.length > 0) {
        const scoreEl = createScoreElement(match.score);
        card.appendChild(scoreEl);
      }

      // Info tambahan
      const infoDiv = document.createElement('div');
      infoDiv.className = 'match-info';

      // Status pertandingan
      const statusSpan = document.createElement('span');
      statusSpan.className = 'info-item';
      statusSpan.textContent = `Status: ${match.matchStatusValue || match.matchStatus || 'Unknown'}`;
      infoDiv.appendChild(statusSpan);

      // Jika LIVE, tambahkan badge
      if (match.matchStatus === 'L') {
        const liveBadge = document.createElement('span');
        liveBadge.className = 'live-badge';
        liveBadge.textContent = 'LIVE';
        infoDiv.appendChild(liveBadge);
      }

      // Waktu pertandingan
      if (match.matchTime) {
        const timeSpan = document.createElement('span');
        timeSpan.className = 'info-item';
        const dateObj = new Date(match.matchTime);
        timeSpan.textContent = `Waktu: ${dateObj.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}`;
        infoDiv.appendChild(timeSpan);
      }

      // Durasi
      if (match.duration) {
        const durationSpan = document.createElement('span');
        durationSpan.className = 'info-item';
        durationSpan.textContent = `Durasi: ${match.duration} menit`;
        infoDiv.appendChild(durationSpan);
      }

      // Lokasi
      if (match.locationName) {
        const locationSpan = document.createElement('span');
        locationSpan.className = 'info-item';
        locationSpan.textContent = `Lokasi: ${match.locationName} - ${match.courtName || ''}`;
        infoDiv.appendChild(locationSpan);
      }

      // Jenis pertandingan
      if (match.matchTypeValue) {
        const typeSpan = document.createElement('span');
        typeSpan.className = 'info-item';
        typeSpan.textContent = `Jenis: ${match.matchTypeValue}`;
        infoDiv.appendChild(typeSpan);
      }

      card.appendChild(infoDiv);

      return card;
    }

    // Fungsi utama untuk fetch dan render data
    async function loadMatches() {
      const container = document.getElementById('matches-container');
      container.innerHTML = '<p>Memuat data pertandingan...</p>';

      try {
        const response = await fetch(apiUrl);
        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);

        const matches = await response.json();

        if (!Array.isArray(matches) || matches.length === 0) {
          container.innerHTML = '<p>Tidak ada data pertandingan untuk tanggal ini.</p>';
          return;
        }

        container.innerHTML = ''; // Kosongkan container

        matches.forEach(match => {
          const card = createMatchCard(match);
          container.appendChild(card);
        });

      } catch (error) {
        container.innerHTML = `<p>Gagal memuat data pertandingan. Silakan coba lagi nanti.<br><small>${error.message}</small></p>`;
        console.error('Error fetching matches:', error);
      }
    }

    // Load data saat halaman siap
    window.addEventListener('DOMContentLoaded', loadMatches);
  </script>
</body>
</html>
