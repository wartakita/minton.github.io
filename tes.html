<html>  
  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <link rel='stylesheet' href='https://cdn.plyr.io/3.7.8/plyr.css'>  
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>  
    <link href="https://fonts.googleapis.com/css?family=Poppins" rel="stylesheet" />  
    <script src="https://cdn.plyr.io/3.7.8/plyr.js"></script>  
</head>  
  
<body>  
    <video autoplay="true" id="player" crossOrigin="anonymous" preload="none" controls allowFullScreen webkitallowfullscreen mozallowfullscreen></video>  
  
    <script src="https://cdn.jsdelivr.net/npm/shaka-player@4.12.7/dist/shaka-player.compiled.min.js"></script>  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/shaka-player@4.12.7/dist/controls.min.css">  
  
    <script>  
        (function() {  
            var video = document.querySelector('#player');  
            initApp();  
  
            function initApp() {  
                shaka.polyfill.installAll();  
                if (shaka.Player.isBrowserSupported()) {  
                    initPlayer();  
                } else {  
                    console.error('Browser not supported!');  
                }  
            }  
  
            function initPlayer() {  
                var video = document.querySelector('#player');  
                var player = new shaka.Player(video);  
                player.addEventListener('error', onErrorEvent);  
  
                player.configure({  
                    drm: {  
                        clearKeys: {  
                            '6b7bbcf1d511a56e6b3ceda392e4fa33': 'd1766244d7c1c44efd4c67aafae3ee7b',  
                        }  
                    }  
                });  
  
                player.load('https://av-ch-cdn.mncnow.id/live/eds/NetTV-HD/sa_dash_vmx/NetTV-HD.mpd') // source  
                    .then(function() {  
                        var variantTracks = player.getVariantTracks();  
                        var bitrates = variantTracks.map(track => ({  
                            id: track.id,  
                            height: track.height,  
                            bandwidth: track.bandwidth  
                        })).sort((a, b) => a.bandwidth - b.bandwidth);  
  
                        new Plyr(video, {  
                            controls: ["play-large", "pause-large", "play", "mute", "volume", "live", "settings", "pip", "fullscreen"],  
                            settings: ['quality', 'speed', 'loop'],  
                            speed: {  
                                selected: 1,  
                                options: [0.5, 0.75, 1]  
                            },  
                            quality: {  
                                options: bitrates.map(j => j.height),  
                                forced: true,  
                                onChange: function(newQuality) {  
                                    player.configure({  
                                        abr: {  
                                            enabled: false  
                                        }  
                                    });  
  
                                    var tracks = player.getVariantTracks().filter(tk => tk.height === newQuality);  
                                    player.selectVariantTrack(tracks[0], true);  
                                }  
                            }  
                        });  
                    });  
            }  
  
            function onErrorEvent(event) {  
                console.error(event.detail);  
            }  
        })();  
    </script>  
</body>  
  
</html>  
